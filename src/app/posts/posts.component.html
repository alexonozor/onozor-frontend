<nz-layout>
  <nz-sider>
    <app-sidebar></app-sidebar>
  </nz-sider>

  <nz-content style="margin:25px 55px;">
    <div nz-row nzGutter="48">
      <div nz-col nz-col nzSpan="12">
        <nz-card style="margin-bottom: 20px" [nzLoading]="loading">
          <div nz-row class="card-user-info">
            <div nz-col nzSpan="2">
              <nz-avatar nzIcon="anticon anticon-user" [nzSrc]="post?.question?.author?.avatar?.thumb?.url"></nz-avatar>
            </div>
            <div nz-col nzXl="5">
              <a>
                <p class="card-user-name">{{post?.question?.author?.full_name}}</p>
              </a>
              <span>@{{post?.question?.author?.slug}}</span>
            </div>
            <div nz-col nzXl="17">
              <small class="question-date">{{post?.question?.created_at | amTimeAgo}}</small>
            </div>
          </div>

          <h2 class="post-title">{{post?.question?.name}}</h2>
          <!-- <div class="post-body" markdown [data]="post?.question?.body"></div> -->
          <div class="post-body"  [innerHTML]="post?.question?.body  | markdown"></div>

          <div nz-row nzGutter="48" class="post-action-bar">
            <div nz-col nzSpan="15">

              <button nz-button class="remove-border" nzType="default" [nzSize]="large" (click)="upvote()">
                <i class="fa fa-arrow-up"></i> Upvote {{post?.question?.vote_count}}</button>
                <button nz-button class="remove-border" nzType="default" [nzSize]="large" (click)="downvote()">
                  <i class="fa fa-arrow-down"></i> Downvote</button>

              <button nz-button class="remove-border" nzType="default" [nzSize]="large" (click)="toggleComment()" nz-tooltip nzTitle="Unable to understand the question? ask for more info.">
                <i class="fa fa-reply"></i> Ask details ({{post?.question?.comments_count}})</button>
              <!-- <button nz-button class="remove-border" nzType="default" [nzSize]="large">
                  <i class="anticon anticon-plus-circle-o"></i> Follow </button> -->
            </div>

            <div nz-col nzSpan="9" style="text-align: right;">
              <nz-dropdown *ngIf="currentUser && currentUser.id == post?.author?.id">
                <button class="remove-border" nzSize="large" nz-button nz-dropdown nz-tooltip nzTitle="More">
                  <i class="fas fa-ellipsis-h"></i>
                </button>
                <ul nz-menu>
                    <li nz-menu-item>
                      <a>
                        <i class="fa fa-edit"></i> Edit </a>
                    </li>
                    <li nz-menu-item>
                      <a>
                        <i class="fa fa-trash-alt"></i> Delete Post </a>
                    </li>   
                  <!-- <li nz-menu-item>
                    <a>
                      <i class="anticon anticon-message"></i> Invite to answer</a>
                  </li>
                  <li nz-menu-item>
                    <a>
                      <i class="anticon anticon-dashboard"></i> Post Activities</a>
                  </li>
                  <li nz-menu-item>
                    <a>
                      <i class="anticon anticon-exclamation-circle-o"></i> Report</a>
                  </li> -->
                </ul>
              </nz-dropdown>

              <button class="remove-border" nzSize="large" nz-button (click)="favouritePost(post)" nz-tooltip nzTitle="Favorite">
                <i [ngClass]="favourite? 'anticon anticon-heart red' : 'anticon anticon-heart-o'"></i>
              </button>
              <button (click)="toggleShare()" nzSize="large" class="remove-border" nz-button nz-tooltip nzTitle="Share">
                <i class="anticon anticon-share-alt"></i>
              </button>
            </div>
          </div>


          <div class="comment" [hidden]="!showComment">
            <app-comments *ngIf="post?.question?.id" [slug]="post?.question?.id" commentableType="Question"></app-comments>
            <app-comment-form *ngIf="post?.question?.id" [slug]="post?.question?.id" commentableType="Question"></app-comment-form>
          </div>

          <app-share-post [hidden]="!sharePost" *ngIf="post?.question?.id" [title]="post?.question?.name" [postUrL]="postUrL" postType="Question"></app-share-post>

        </nz-card>

        <app-answer-form *ngIf="post?.question?.id" [questionId]="post?.question?.id"></app-answer-form>
        <app-answers [slug]="slug"></app-answers>

      </div>
      <div nz-col nz-col nzSpan="9">
        <nz-card style="width:300px;">
          <p>Card content</p>
          <p>Card content</p>
          <p>Card content</p>
        </nz-card>
      </div>

    </div>

  </nz-content>
</nz-layout>
